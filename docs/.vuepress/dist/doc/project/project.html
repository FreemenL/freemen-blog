<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>emptyd-admin-webpack</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/assets/css/0.styles.2f542426.css" as="style"><link rel="preload" href="/assets/js/app.6c427e48.js" as="script"><link rel="preload" href="/assets/js/2.d49fcee4.js" as="script"><link rel="preload" href="/assets/js/9.2d47f80b.js" as="script"><link rel="prefetch" href="/assets/js/10.5af3635f.js"><link rel="prefetch" href="/assets/js/3.ff3095ef.js"><link rel="prefetch" href="/assets/js/4.79373e08.js"><link rel="prefetch" href="/assets/js/5.1c1b6b5c.js"><link rel="prefetch" href="/assets/js/6.d2e70e64.js"><link rel="prefetch" href="/assets/js/7.07ccbe42.js"><link rel="prefetch" href="/assets/js/8.aedcf593.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2f542426.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/doc/synopsis/synopsis.html" class="nav-link">简介</a></div><div class="nav-item"><a href="/doc/blog/blog.html" class="nav-link">博客</a></div><div class="nav-item"><a href="/doc/learn/learn.html" class="nav-link">学习资源</a></div><div class="nav-item"><a href="/doc/project/project.html" class="nav-link router-link-exact-active router-link-active">开源项目</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/doc/synopsis/synopsis.html" class="nav-link">简介</a></div><div class="nav-item"><a href="/doc/blog/blog.html" class="nav-link">博客</a></div><div class="nav-item"><a href="/doc/learn/learn.html" class="nav-link">学习资源</a></div><div class="nav-item"><a href="/doc/project/project.html" class="nav-link router-link-exact-active router-link-active">开源项目</a></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="emptyd-admin-webpack"><a href="#emptyd-admin-webpack" aria-hidden="true" class="header-anchor">#</a> <a href="https://github.com/FreemenL/emptyd-admin-webpack" target="_blank" rel="noopener noreferrer">emptyd-admin-webpack<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></h1> <p>基于typescript react webpack的脚手架</p> <h3 id="关于本项目功能"><a href="#关于本项目功能" aria-hidden="true" class="header-anchor">#</a> 关于本项目功能</h3> <p>1.针对不同的loader采用了多进程编译，指定精确处理的目录和排除的目录，并开启缓存 极大的加快了编译速度。</p> <p>2.使用webpack.DllReferencePlugin 根据环境自动 提取固定资源，加快编译与打包速度</p> <p>3.区分生产环境和开发环境。</p> <p>4.启用cssmodule 默认使用postcss + postcss-cssnext，内置处理浏览器前缀。</p> <p>5.启用 tree shaking</p> <p>6.启用 scope hoisting</p> <p>7.Babel配有transform-runtime让代码更优化</p> <p>8.更改文件,防缓存的hash规则</p> <p>9.把小图片转成base64码</p> <p>10.快速编译，热更新，自动刷新</p> <p>11.resolve.modules 优化模块查找路径</p> <p>12.optimization splitChunks 合并公共代码</p> <p>13.单独抽离css文件</p> <p>14.压缩css js 文件。</p> <p>15.大文件跳过编译 直接拷贝</p> <p>16.自定义loader 优化文件引入</p> <p>17.自定义plugin 输出编译产出</p> <p>18.nodemon 监听配置文件改动</p> <p>19.系统级的错误提示</p> <p>20.端口冲突自动切换</p> <p>21.自动生成编译日志</p> <p>22.编译结果可视化</p> <p>23.本地端口运行打包后项目</p> <p>24.脚手架 配置化</p> <h2 id="程序目录"><a href="#程序目录" aria-hidden="true" class="header-anchor">#</a> 程序目录</h2> <div class="language- extra-class"><pre class="language-text"><code>├── build                    # webpack 配置目录
│   ├── loaders              # 自定义loader目录
│   ├── plugins              # 自定义plugin目录
│   ├── template             # html模版目录
├── config                   # 系统配置目录
├── dist                     # 打包资源
├── log                      # 日志目录
├── scripts                  # 运行脚本
├── src                      # 源码目录
├── static                   # 静态资路径(直接拷贝的文件)
├── typings                  # ts类型声明文件
├── .babelrc                 # babel配置(预设和插件)
├── .eslintrc.js             # eslint配置
├── package.json             # 项目描述
├── postcss.config.js        # postcss配置
└── tsconfig.json            # ts配置
</code></pre></div><h2 id="项目启动"><a href="#项目启动" aria-hidden="true" class="header-anchor">#</a> 项目启动</h2> <h3 id="环境配置"><a href="#环境配置" aria-hidden="true" class="header-anchor">#</a> 环境配置</h3> <ul><li>为了把保证项目正常运行，请自行更新相关环境。</li></ul> <ol><li>安装<a href="https://nodejs.org/" target="_blank" rel="noopener noreferrer">node.js<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>安装<a href="https://git-scm.com/" target="_blank" rel="noopener noreferrer">git<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol> <h3 id="依赖配置"><a href="#依赖配置" aria-hidden="true" class="header-anchor">#</a> 依赖配置</h3> <ol><li>首先clone项目</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">git</span> clone https://github.com/FreemenL/emptyd-admin-webpack.git
$ <span class="token builtin class-name">cd</span> emptyd-admin-webpack
</code></pre></div><ol start="2"><li>下载依赖</li></ol> <ul><li><p>请确保你的环境配置完成，然后就可以开始以下步骤</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">npm</span> <span class="token function">install</span>                   <span class="token comment"># Install project dependencies</span>
$ <span class="token function">npm</span> start                     <span class="token comment"># Compile and launch</span>
</code></pre></div><h2 id="命令说明"><a href="#命令说明" aria-hidden="true" class="header-anchor">#</a> 命令说明</h2></li></ul> <p>开发过程中，你用得最多的会是<code>npm start</code>，但是这里还有很多其它的处理：</p> <table><thead><tr><th><code>npm run &lt;script&gt;</code></th> <th>Explain</th></tr></thead> <tbody><tr><td>start</td> <td>初始化启动项目（生成Dll文件并启动服务）</td></tr> <tr><td>build</td> <td>打包</td></tr> <tr><td>ls</td> <td>将dist目录在本地8080端口运行</td></tr></tbody></table> <h3 id="系统配置说明"><a href="#系统配置说明" aria-hidden="true" class="header-anchor">#</a> 系统配置说明</h3> <div class="language-typescript extra-class"><pre class="language-typescript"><code><span class="token keyword">module</span><span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// 模式  dev | run  区别:dev 会开启配置文件监听 run 不会</span>
  pattern<span class="token punctuation">:</span> <span class="token string">'run'</span><span class="token punctuation">,</span>
  <span class="token comment">// 系统路径配置 相对命令行启动目录 </span>
  systemPath<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 入口文件</span>
    appIndex<span class="token punctuation">:</span> <span class="token string">'src/index'</span><span class="token punctuation">,</span>
    <span class="token comment">// ts配置文件</span>
    appTsConfig<span class="token punctuation">:</span> <span class="token string">'config/tsconfig'</span><span class="token punctuation">,</span>
    <span class="token comment">// webpack ts配置</span>
    webpackTsConfig<span class="token punctuation">:</span> <span class="token string">'config/tsconfig-for-webpack-config'</span><span class="token punctuation">,</span>
    <span class="token comment">// 动态链接库</span>
    appdllLibrary<span class="token punctuation">:</span> <span class="token string">'_dllLibrary_'</span><span class="token punctuation">,</span>
    <span class="token comment">// title图标</span>
    appFavicon<span class="token punctuation">:</span> <span class="token string">'src/public/favicon'</span><span class="token punctuation">,</span>
    <span class="token comment">// 依赖包路径</span>
    appNodeModules<span class="token punctuation">:</span> <span class="token string">'node_modules'</span><span class="token punctuation">,</span>
    <span class="token comment">// 日志目录</span>
    appLog<span class="token punctuation">:</span> <span class="token string">'log'</span><span class="token punctuation">,</span>
    <span class="token comment">// 源码目录</span>
    appSrc<span class="token punctuation">:</span> <span class="token string">'src'</span><span class="token punctuation">,</span>
    <span class="token comment">// 打包路径</span>
    appBuild<span class="token punctuation">:</span> <span class="token string">'dist'</span><span class="token punctuation">,</span>
    <span class="token comment">// 配置文件目录</span>
    appConfig<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'build'</span><span class="token punctuation">,</span> <span class="token string">'config'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 自定义loader目录</span>
    appLoader<span class="token punctuation">:</span> <span class="token string">'build/loaders'</span><span class="token punctuation">,</span>
    <span class="token comment">// 自定义　依赖包路径下需要awesome-typescript-loader 处理的文件目录</span>
    appTsLoader<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'node_modules/_emptyd@0.0.7@emptyd'</span><span class="token punctuation">,</span> <span class="token string">'node_modules/_freetool@0.0.3@freetool'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 静态资源路径 存放较大文件 该目录下存放文件会被 CopyWebpackPlugin 直接复制到打包后dist/static 路径</span>
    appStatic<span class="token punctuation">:</span> <span class="token string">'static'</span><span class="token punctuation">,</span>
    <span class="token comment">// node_modules 下不会被cssmodule 处理的文件路径</span>
    appExcludeCssModule<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'antd'</span><span class="token punctuation">,</span> <span class="token string">'normalize.css'</span><span class="token punctuation">,</span> <span class="token string">'rc-texty'</span><span class="token punctuation">,</span> <span class="token string">'nprogress'</span><span class="token punctuation">,</span> <span class="token string">'braft-editor'</span><span class="token punctuation">,</span> <span class="token string">'rc-queue-anim'</span><span class="token punctuation">,</span> <span class="token string">'viewerjs'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// 路径别名相对源码目录</span>
    appPathAlias<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'@src'</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token string">'@components'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">components</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@actions'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">store/actions</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@constants'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">store/constants</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@pages'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">pages</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@reducers'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">store/reducers</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@router'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">router</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@store'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">store</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@public'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">public</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@utils'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">utils</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">'@service'</span><span class="token punctuation">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">service</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 系统常量</span>
  systemConstant<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 系统名称</span>
    title<span class="token punctuation">:</span> <span class="token string">'emptyd系统'</span><span class="token punctuation">,</span>
    <span class="token comment">// html模板文件 路径相对命令行启动目录</span>
    htmlTemplate<span class="token punctuation">:</span> <span class="token string">'./build/template/index.html'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 开发环境配置</span>
  devConfig<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 本地服务端口 支持同时启动多个服务</span>
    localServerPort<span class="token punctuation">:</span> <span class="token number">8091</span><span class="token punctuation">,</span>
    <span class="token comment">// 代理配置</span>
    <span class="token comment">// proxyTable: {</span>
    <span class="token comment">//   '/**': {</span>
    <span class="token comment">//     target: 'http://193.112.220.100',</span>
    <span class="token comment">//     changeOrigin: true,</span>
    <span class="token comment">//     secure: true</span>
    <span class="token comment">//   }</span>
    <span class="token comment">// }</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否生成编译报告  为true时候可在 127.0.0.1:8888查看编译结果</span>
  bundleAnalyzerReport<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 动态连接库中排除</span>
  dllLibraryExclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'freetool'</span><span class="token punctuation">,</span><span class="token string">'antd'</span><span class="token punctuation">,</span><span class="token string">'antd-mobile'</span><span class="token punctuation">,</span> <span class="token string">'normalize.css'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否开启编译缓存 </span>
  onCompiltionCache<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token comment">// 是否开启代码检查 </span>
  onLint<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token comment">//上传服务器配置</span>
  remoteServer<span class="token punctuation">:</span><span class="token punctuation">{</span>
    uploadFile<span class="token punctuation">:</span><span class="token string">'./dist/**'</span><span class="token punctuation">,</span>
    sshConfig<span class="token punctuation">:</span><span class="token punctuation">{</span>
      remotePath<span class="token punctuation">:</span><span class="token string">'/root/nginx_szcg/website/zhifa/dist'</span><span class="token punctuation">,</span>
      ssh<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token comment">// 正式</span>
        host<span class="token punctuation">:</span> <span class="token string">&quot;129.139.254.333&quot;</span><span class="token punctuation">,</span>
        port<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>
        username<span class="token punctuation">:</span> <span class="token string">'root'</span><span class="token punctuation">,</span>
        password<span class="token punctuation">:</span> <span class="token string">'xxxxxxxxxxxxx'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> 
      commands<span class="token punctuation">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// 删除现有文件</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">rm -rf /root/nginx_szcg/website/zhifa/dist</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6c427e48.js" defer></script><script src="/assets/js/2.d49fcee4.js" defer></script><script src="/assets/js/9.2d47f80b.js" defer></script>
  </body>
</html>
